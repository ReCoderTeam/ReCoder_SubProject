<!doctype html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
  <!--폰트 적용-->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">

  <link rel="stylesheet" th:href="@{/css/common/header.css}">
  <link rel="stylesheet" th:href="@{/css/common/footer.css}">
  <link rel="stylesheet" th:href="@{/css/common/style.css}">

  <link rel="stylesheet" th:href="@{/css/zasapage/product.css}">

</head>
<body>
<div class="snowfall-container" id="snowContainer"></div>
<header th:replace="~{/common/header::headerFragment}"></header>
<section>
  <div class="container">
    <!-- Sidebar -->
    <div class="sidebar">
      <div class="sidebar-title">자사 페이지</div>
      <ul>
        <li><a href="/approvals/zasaPage">제품 페이지</a></li>
        <li><a href="/approvals/">교육 페이지</a></li>
      </ul>
    </div>

    <!-- Main Content -->
    <div class="main-content">
      <div class="carousel-container">
        <button class="control-button prev" onclick="rotateCarousel(-1)">&#10094;</button>
        <!-- &#10094;는 '<' 화살표, &#10095;는 '>' 화살표 -->
        <div class="carousel">
          <!-- 제품 카드들이 자바스크립트로 여기에 추가됩니다 -->
        </div>
        <button class="control-button next" onclick="rotateCarousel(1)">&#10095;</button>
      </div>
    </div>
  </div>
</section>
<footer th:replace="~{/common/footer::footerFragment}"></footer>


<script src="/js/snowfall.js"></script>

<script th:inline="javascript">

  const products = /*[[${products}]]*/ [];

  // // 제품 데이터
  // const products = [
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 16.53.12 - 황금초콜렛.webp",
  //     name: "황금 초콜릿",
  //     price: "30,000원",
  //     description: "진한 초콜릿 속에 빛나는 황금빛 코팅이 더해진 특별한 디저트입니다. 축제나 특별한 날을 위한 최고의 선택으로, 먹는 순간 기분까지 고급스럽게 만들어줍니다!"
  //   },
  //
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 16.55.15 - 바이올렛색으로변하는껌.webp",
  //     name: "바이올렛 껌",
  //     price: "20,000원",
  //     description: "\"바이올렛의 신비로운 변신!\"\n" +
  //             "먹는 순간 과즙이 폭발하며 달콤한 바이올렛 향이 입안을 가득 채우는 바이올렛 껌은 특별한 재미를 선사합니다. 씹을수록 색다른 맛의 변화와 함께 영화 속의 신비로운 매력을 직접 체험해보세요."
  //   },
  //
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 16.56.50 - 다람쥐고기과자.webp",
  //     name: "다람쥐 고기 초콜릿",
  //     price: "49,000원",
  //     description: "\"귀여움과 호기심을 한입에!\"\n" +
  //             "귀여운 다람쥐의 실루엣을 본뜬 다람쥐 고기 초콜릿은 고소한 견과류와 달콤한 초콜릿의 완벽한 조화를 이룹니다. 다람쥐들의 장난스러운 매력을 그대로 담아낸 특별한 간식입니다."
  //   },
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 17.11.37 - 호두과자.webp",
  //     name: "호두 크런치 다람쥐 비스킷",
  //     price: "13,000원",
  //     description: "\"바삭한 즐거움, 고소한 풍미!\"\n" +
  //             "호두 크런치 다람쥐 비스킷은 다람쥐의 상징인 견과류에서 영감을 받아 만들어진 바삭하고 고소한 비스킷입니다. 차 한잔과 곁들이면 최고의 간식으로 즐길 수 있습니다."
  //   },
  //
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 17.11.39 -키커지는과자.webp",
  //     name: "키 커지는 과자",
  //     price: "100,000,000원",
  //     description: "\"한 입 베어 물면 키가 쑥쑥!\"\n" +
  //             "키 커지는 과자는 영화 속 상상력을 현실로 가져온 혁신적인 간식입니다. 고소한 곡물 맛과 쫀득한 식감이 특징이며, 아이들에게 꿈과 즐거움을 선사할 최고의 선택입니다."
  //   },
  //
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 17.14.38 - 시간여행캔디.webp",
  //     name: "시간여행 캔디",
  //     price: "999,999,999원",
  //     description: "\"한 입에 시간 여행의 시작!\"\n" +
  //             "시간여행 캔디는 과거와 미래를 여행할 수 있다는 상상력을 담은 신비로운 제품입니다. 달콤한 맛과 함께 톡톡 튀는 식감은 당신의 하루를 특별한 모험으로 만들어줄 것입니다."
  //   },
  //
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 17.35.32 - 가글거품캔디.webp",
  //     name: "캔디 가글 폭탄",
  //     price: "25,000원",
  //     description: "\"입 안에서 터지는 재미와 상쾌함!\"\n" +
  //             "캔디 가글 폭탄은 물과 함께 먹으면 폭발적인 거품과 상쾌한 청량감을 선사합니다. 한 입 먹는 순간 입 안이 폭죽처럼 터지는 재미와 깨끗함을 경험할 수 있습니다."
  //   },
  //
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 17.41.48 -곰발바닥젤리.webp",
  //     name: "의문의 젤리 발바닥",
  //     price: "38,000원",
  //     description: "\"의문의 젤리 발바닥\"은 귀여운 동물 발바닥 모양의 젤리로, 한입 베어 무는 순간 독특한 경험을 제공합니다. 젤리를 먹는 동시에 발밑에서 이상한 발자국 소리가 들려와, 마치 동물이 곁에서 함께 걷는 듯한 기분을 느낄 수 있습니다."
  //   },
  //
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 17.46.47 - 기본초콜렛.webp",
  //     name: "찰리와 초콜릿공장에 시그니처 초콜렛!",
  //     price: "3,000원",
  //     description: "윌리웡카의 초콜릿 공장의 시그니처!!" +
  //             "클래식 초콜릿 바는 초콜릿의 본질에 충실하면서도 고급스러움을 잃지 않은 완벽한 간식입니다. 깊고 풍부한 초콜릿 맛과 부드러운 질감은 전 세대를 아우르며 사랑받는 이유입니다."
  //   },
  //
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 17.49.52 -기억소생껌.webp",
  //     name: "기억 소생 껌",
  //     price: "13,000원",
  //     description: "씹을 때마다 과거의 소중한 기억을 떠올리게 하는 듯한 껌.\n" +
  //             "포장은 회전식 필름처럼 기억의 장면을 표현.\n" +
  //             "껌 색상은 은은한 빛깔로 과거의 향수를 떠올리게 함. \n" +
  //             "Take a bite, and bring your memories to life.\" (한 입에 기억을 되살리다.)\n"
  //   },
  //
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 17.51.25 - 꿈속여행젤리.webp",
  //     name: "꿈속 여행 젤리",
  //     price: "13,000원",
  //     description: "\"한 입 베어 물면, 신비로운 꿈속 세계로의 초대!\"\n" +
  //             "꿈속 여행 젤리는 몽환적인 밤하늘의 별, 구름, 초승달 모양으로 제작된 독특한 젤리입니다.\n" +
  //             "이 젤리를 한 입 맛보는 순간, 입안 가득 퍼지는 달콤하고 부드러운 맛과 함께 마치 꿈속에서 유영하는 듯한 경험을 선사합니다."
  //   },
  //
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 17.53.04 - 무중력캔디.webp",
  //     name: "무중력 캔디",
  //     price: "13,000원",
  //     description: "무중력 캔디는 입에 넣는 순간 떠오르는 기분을 선사하는 특별한 경험을 제공합니다. 마치 우주를 여행하며 무중력 상태를 체험하는 듯한 독특한 즐거움을 느껴보세요! "
  //   },
  //
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 17.55.21 - 눈물방울캔디.webp",
  //     name: "눈물방울 캔디",
  //     price: "13,000원",
  //     description: "감정을 맛보다 투명한 유리병에 담긴 형형색색의 눈물방울 모양 캔디. 각각의 캔디는 감정을 상징하며, 파란색은 평온, 빨간색은 열정, 노란색은 기쁨, 초록색은 평화를 표현합니다. 반짝이는 질감과 부드러운 투명함은 진짜 눈물방울을 연상케 하며, 캔디 하나를 맛볼 때마다 감정의 세계로 여행을 떠나는 기분을 선사합니다!!"
  //   },
  //
  //   {
  //     image: "/images/zasaPage/DALL·E 2024-12-24 17.57.22 - 소리나는초콜릿.webp",
  //     name: "소리나는 초콜릿",
  //     price: "13,000원",
  //     description: "\"깨물 때마다 세상이 음악이 됩니다!\"\n" +
  //             "소리나는 초콜릿은 한 입 베어물 때마다 독특한 소리가 나는 마법 같은 간식을 제공합니다. 초콜릿 조각마다 악기 소리, 동물 소리, 또는 자연의 소리 등 서로 다른 음향이 설정되어 있어, 맛뿐만 아니라 소리로도 즐거움을 선사합니다."
  //   },
  //
  //
  // ];

  let currentRotation = 0;
  let selectedIndex = 0;

  // 캐러셀 초기화
  function initializeCarousel() {
    const carousel = document.querySelector('.carousel');
    const angleStep = 360 / products.length;
    const radius = 1000;  // 카드와의 간격
    const verticalOffset = -50; // 여기에 원하는 값을 입력 (음수일수록 위로 올라감)



    carousel.style.transform = `rotateY(${currentRotation}deg)`;

    // 기존 내용 제거
    carousel.innerHTML = '';

    products.forEach((product, index) => {
      const cardWrapper = document.createElement('div');
      cardWrapper.className = 'card-wrapper';

      const angle = angleStep * index;

      // 카드의 위치 설정
      cardWrapper.style.transform = `rotateY(${angle}deg) translateZ(${radius}px) translateY(${verticalOffset}px)`;
      const card = document.createElement('div');
      card.className = 'product-card';

      // 카드 내용 설정
      card.innerHTML = `
            <img src="${product.image}" alt="${product.name}">
            <h3>${product.name}</h3>
            <p class="price">${product.price}</p>
            <p>${product.description}</p>
        `;

      // 카드가 항상 정면을 보도록 설정 - 여기가 핵심 수정 부분
      card.style.transform = `rotateY(${-angle - currentRotation}deg)`;

      cardWrapper.appendChild(card);
      cardWrapper.style.opacity = selectedIndex === index ? '1' : '0.7';
      carousel.appendChild(cardWrapper);
    });
  }

  // 회전 함수도 약간 수정
  function rotateCarousel(direction) {
    currentRotation += -direction * (360 / products.length);
    const carousel = document.querySelector('.carousel');
    carousel.style.transform = `rotateY(${currentRotation}deg)`;

    selectedIndex = (selectedIndex + direction + products.length) % products.length;

    // 모든 카드의 방향과 투명도 업데이트
    document.querySelectorAll('.card-wrapper').forEach((wrapper, index) => {
      const card = wrapper.querySelector('.product-card');
      const angle = (360 / products.length) * index;

      // 여기가 핵심 수정 부분
      card.style.transform = `rotateY(${-angle - currentRotation}deg)`;
      wrapper.style.opacity = selectedIndex === index ? '1' : '0.7';

    });
  }

  // 페이지 로드 시 캐러셀 초기화
  document.addEventListener('DOMContentLoaded', initializeCarousel);



  async function fetchProducts() {
    const response = await fetch('/admin/product');
    const products = await response.json();

    updateCarousel(products);
  }

  function updateCarousel(products) {
    const carousel = document.querySelector('.carousel');
    const angleStep = 360 / products.length;
    const radius = 1000;

    carousel.innerHTML = '';

    products.forEach((product, index) => {
      const cardWrapper = document.createElement('div');
      cardWrapper.className = 'card-wrapper';

      const angle = angleStep * index;

      cardWrapper.style.transform = `rotateY(${angle}deg) translateZ(${radius}px)`;

      const card = document.createElement('div');
      card.className = 'product-card';

      card.innerHTML = `
            <img src="${product.image}" alt="${product.name}">
            <h3>${product.name}</h3>
            <p class="price">${product.price}</p>
            <p>${product.description}</p>
        `;

      cardWrapper.appendChild(card);
      carousel.appendChild(cardWrapper);
    });
  }

  // 페이지 로드 시 최신 제품 리스트 가져오기
  document.addEventListener('DOMContentLoaded', fetchProducts);



</script>

</body>
</html>