<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <!--폰트 적용-->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@100..900&display=swap" rel="stylesheet">

    <link rel="stylesheet" th:href="@{/css/common/header.css}">
    <link rel="stylesheet" th:href="@{/css/common/footer.css}">
    <link rel="stylesheet" th:href="@{/css/common/style.css}">
    <link rel="stylesheet" th:href="@{/css/approval/completed.css}">
</head>
<body>
<div class="snowfall-container" id="snowContainer"></div>
<header th:replace="~{/common/header::headerFragment}"></header>
<section>
    <div class="container">
        <div class="sidebar">
            <div class="sidebar-title">전자결제</div>
            <ul>
                <li><a href="/approvals/waiting">대기 중</a></li>
                <li><a href="/approvals/inProgress">진행 중</a></li>
                <li><a href="/approvals/completed">완료</a></li>
                <li><a href="/approvals/rejected">반려</a></li>

                <li><a href="/approvals/myDocuments">내가 작성한</a></li>
                <li><a href="/approvals/referenceDocuments">참조</a></li>
            </ul>
        </div>
        <div class="main-content">
            <h1>완료 된 문서</h1>
            <div class="table-header">
                <div class="table-cell">번호</div>
                <div class="table-cell">기안자</div>
                <div class="table-cell">제목</div>
                <div class="table-cell">작성일</div>
                <div class="table-cell">상태</div>
            </div>
            <div class="table-row" th:each="doc : ${documents}">
                <div class="table-cell" th:text="${doc.rowNum}"></div>
                <div class="table-cell" th:text="${doc.creatorName}"></div> <!-- 작성자 이름 -->
                <div class="table-cell" th:text="${doc.title}"></div>
                <div class="table-cell" th:text="${#dates.format(doc.createDate, 'yyyy-MM-dd')}"></div>
                <div class="table-cell" th:text="${doc.status}"></div>
            </div>

            <!-- 페이지네이션 표시 -->
            <div class="pagination">
                <ul>
                    <!-- 첫 페이지 -->
                    <li class="first">
                        <a href="?page=1"><<</a>
                    </li>
                    <!-- 이전 페이지 -->
                    <li class="prev">
                        <a th:href="@{'/approvals/completed?page=' + ${prevPage}}" class="prev"><</a>
                    </li>

                    <!-- 페이지 번호들 -->
                    <th:block th:each="i : ${#numbers.sequence(1, totalPages)}">
                        <li th:classappend="${i == currentPage ? 'active' : ''}">
                            <a th:href="@{'/approvals/completed?page=' + ${i}}" th:text="${i}"></a>
                        </li>
                    </th:block>

                    <!-- 다음 페이지 -->
                    <li class="next">
                        <a th:href="@{'/approvals/completed?page=' + ${nextPage}}" class="next">></a>
                    </li>
                    <!-- 마지막 페이지 -->
                    <li class="last">
                        <a th:href="@{'/approvals/completed?page=' + ${totalPages}}" class="last">>></a>
                    </li>
                </ul>
            </div>
        </div>
    </div>
</section>

<footer th:replace="~{/common/footer::footerFragment}"></footer>


<script>
    function createSnowflake() {
        const snowflake = document.createElement('div');
        snowflake.className = 'snowflake';

        // 랜덤 특성 부여
        const left = Math.random() * 100; // 랜덤 가로 위치
        const size = Math.random() * 10 + 15; // 15-25px 크기
        const duration = Math.random() * 5 + 8; // 8-13초 낙하 시간
        const color = [
            'rgba(176, 224, 230, 0.4)', // 연한 하늘색
            'rgba(173, 216, 230, 0.4)', // 밝은 하늘색
            'rgba(135, 206, 235, 0.4)', // 스카이블루
            'rgba(176, 196, 222, 0.4)', // 연한 스틸블루
            'rgba(188, 212, 230, 0.4)'  // 파스텔 하늘색
        ][Math.floor(Math.random() * 5)];

        // 랜덤 눈송이 모양
        snowflake.innerHTML = ['❄', '✦', '❅', '✧'][Math.floor(Math.random() * 4)];

        // 스타일 적용
        snowflake.style.left = `${left}%`;
        snowflake.style.fontSize = `${size}px`;
        snowflake.style.color = color;
        snowflake.style.animationDuration = `${duration}s`;

        // 약간의 흔들림 효과 추가
        const wobble = Math.random() * 20 - 10;
        snowflake.style.animationName = `snowfall-${wobble}`;

        // 컨테이너에 추가
        document.getElementById('snowContainer').appendChild(snowflake);

        // 애니메이션 끝나면 제거
        setTimeout(() => {
            snowflake.remove();
        }, duration * 1000);
    }

    // 초기 눈송이들 생성
    for(let i = 0; i < 10; i++) {  // 초기눈송이 갯수
        setTimeout(createSnowflake, Math.random() * 1000);  //숫자를 줄이면 더 빠르게 초기 눈송이가 생성됨
                                                            //숫자를 키우면 더 천천히 생성됨
    }

    // 계속해서 새로운 눈송이 생성
    setInterval(createSnowflake, 20);

    // 눈의 양: setInterval의 시간(150)을 조절
    // 눈의 크기: size 변수의 범위(15-25px) 조절
    // 낙하 속도: duration 변수의 범위(8-13초) 조절
    // 색상: color 배열의 색상들 수정

</script>
</body>
</html>
